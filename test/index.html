<!DOCTYPE html>
<html>
<head>
    <title>Droopy Post Message Tests</title>
        <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.min.js'></script>
	<script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/chai/2.1.0/chai.js'></script>
    <script src='../dist/droopyPostMessage.js' type='text/javascript'></script>
</head>

<body>
    <h2>Droopy Post Message Tests</h2>
    <iframe src='iframed.html' width=800 height=600></iframe>
   <!--<script src='../index.js'></script>-->
   <script>
    mocha.setup('bdd');
    chai.should();
    (function() {
        window._privateNumber = 0;
        var handlers = {
            setNumber: function(event, newNumber) {
                window._privateNumber = newNumber;
            },
            getNumber: function(event) {
                event.respond(window._privateNumber);
            }
        };
        droopyPostMessage.subscribe("get-number", handlers.getNumber);
        droopyPostMessage.subscribe("set-number", handlers.setNumber);
    })();
    </script>
</body>

</html>